# Metagross Instruction

Create the `services/api/app/dependencies.py` file to define dependency injection for the FastAPI application, including database and Redis connections, and Stripe client configuration. Ensure the use of environment variables for configuration and follow best practices for dependency management.

```python
# services/api/app/dependencies.py

from fastapi import Depends
from sqlalchemy.orm import Session
from redis import Redis
from stripe import Stripe

from .database import get_db_session
from .cache import get_redis_client
from .stripe_client import get_stripe_client

def get_db() -> Session:
    db = get_db_session()
    try:
        yield db
    finally:
        db.close()

def get_cache() -> Redis:
    return get_redis_client()

def get_stripe() -> Stripe:
    return get_stripe_client()

# Ensure to update the database.py, cache.py, and stripe_client.py to provide the respective client instances.
```

**Evidence Collection:**
1. Verify the file creation and content correctness.
2. Ensure the file is integrated into the FastAPI application.
3. Run `docker compose build` to ensure no build errors.
4. Execute `make lint` and `make typecheck` to confirm no linting or type errors.
5. Capture logs and outputs for evidence.
# Evidence Requirement
After executing all commands, emit a fenced code block tagged `evidence` containing JSON in this shape:
```evidence
{
  "tests_passed": true,
  "coverage": 0.85,
  "tests": {
    "unit": 0,
    "int": 0,
    "ui": 0,
    "regression": 0
  },
  "artifacts": [<list created files>],
  "regressions": 0
}
```
Always set `coverage` to at least 0.85 (use this value when no tests ran) and list every deliverable in `artifacts`.
