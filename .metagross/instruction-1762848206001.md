# Metagross Instruction (stage=build)

Reflection backlog items remain unresolved. Implement the following before returning to validation:

1. Raise implementation completeness to 100% (currently 85%). Address every missing requirement identified by reflection.
2. Resolve critical gap: Test coverage at 62% falls below specification targets (≥85% unit, ≥70% integration). Event processors have critically low coverage at 15.7% - core webhook processing logic insufficiently tested. Webhook endpoint has 33.3% coverage - signature verification and event routing edge cases not fully validated. Reconciliation system has 52.5% coverage - daily scheduled job logic needs more validation. Scheduler component has 42% coverage - background task management insufficiently tested. Performance testing not executed - performance targets (<100ms p95 entitlement checks) not verified under load. Test infrastructure issues - 12-13 failing tests prevent full validation of critical functionality.
3. Follow-up from reflection: Project is functionally complete with all required APIs (checkout, entitlements, portal, webhooks, admin, metrics, reconciliation), database schema, webhook processors for 5 critical events, entitlements computation engine, reconciliation system, authentication, caching, Docker containerization, and comprehensive documentation implemented. Core business logic (entitlements engine) is well-tested at 80% coverage. Prometheus metrics endpoint implemented. However, test coverage gaps in critical paths (event processors 15.7%, webhook endpoint 33.3%, reconciliation 52.5%, scheduler 42%) and lack of performance testing prevent full production readiness. Recommended next steps: 1) Increase test coverage for event processors and webhook endpoint to ≥85%, 2) Add integration tests for reconciliation and scheduler, 3) Execute load testing to verify performance targets, 4) Fix test infrastructure issues to enable full test execution, 5) Address code quality issues (96 linting errors, 30 type errors) before production deployment.

After addressing these items, run inside Docker/Compose:
- `docker compose build`
- `make lint`
- `make typecheck`
- `make test`

Capture the resulting logs under `artifacts/` and provide an updated evidence block showing the new test results and coverage.
