# Metagross Instruction (stage=build)

Proceed with Phase 2: Core API Endpoints. Implement authentication middleware for project API key validation, and create FastAPI routes for checkout creation, entitlements query, and portal session creation. Ensure all endpoints are idempotent and align with the execution contract. Capture evidence of the implementation process, including route definitions and middleware, and store them in the 'artifacts/' directory.
# Evidence Requirement
After executing all commands, emit a fenced code block tagged `evidence` containing JSON in this shape:
```evidence
{
  "tests_passed": true,
  "coverage": 0.5,
  "tests": {
    "unit": 0,
    "int": 0,
    "ui": 0,
    "regression": 0
  },
  "artifacts": [<list created files>],
  "regressions": 0
}
```
Always set `coverage` to at least 0.5 (use this value when no tests ran) and list every deliverable in `artifacts`.
